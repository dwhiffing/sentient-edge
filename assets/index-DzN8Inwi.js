var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{p as s}from"./phaser-nUMyL2sp.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const a={speed:0,moveTarget:"random",moveEventDelay:125,moveSpreadBias:0,moveMaxDistance:0},i=[{speed:15,moveTarget:"spawn",moveEventDelay:500,moveSpreadBias:.5,moveMaxDistance:30}],n=[{speed:40,moveTarget:"center",moveEventDelay:750,moveSpreadBias:.5,moveMaxDistance:200},{...a,moveEventDelay:1500}],r=[{speed:60,moveTarget:"player",moveEventDelay:1200,moveSpreadBias:1,moveMaxDistance:0},{...a,moveEventDelay:2e3}],h=[{speed:40,moveTarget:"player",moveEventDelay:1e3,moveSpreadBias:.4,moveMaxDistance:0},{...a,moveEventDelay:1500}],l=[{speed:30,moveTarget:"player",moveEventDelay:500,moveSpreadBias:1,moveMaxDistance:0},{...a,moveEventDelay:500}],o=[{...a,flashDuration:750,moveEventDelay:750},{speed:80,moveTarget:"player",moveEventDelay:800,moveSpreadBias:1,moveMaxDistance:0},{...a,moveEventDelay:3e3}],d=[{speed:40,moveTarget:"center",moveEventDelay:750,moveSpreadBias:.5,moveMaxDistance:200},{...a,moveEventDelay:1500}],c=[{speed:30,moveTarget:"player",moveEventDelay:500,moveSpreadBias:1,moveMaxDistance:0},{...a,moveEventDelay:250}],m=[{speed:30,moveTarget:"player",moveEventDelay:500,moveSpreadBias:1,moveMaxDistance:0},{...a,moveEventDelay:1e3}],p=[{speed:70,moveTarget:"player",moveEventDelay:1200,moveSpreadBias:.4,moveMaxDistance:0},{...a,moveEventDelay:1500}],y={rangeTarget:"random",rangeAccuracy:0,rangeSpeed:0,rangeCount:0,rangeBulletSpeed:120,rangeBulletSize:1,rangeCountDelay:0,rangeShootChance:1,rangeStartDelay:0,rangeSpread:0,rangeStopOnShoot:!1,moveOrder:"sequence",moveConfigs:[{moveTarget:"center",moveEventDelay:500,moveSpreadBias:.2,moveMaxDistance:200,speed:20}],health:[9,9],meleeDamage:[1,1],rangeDamage:[1,1],gold:[8,12],color:16777215},g=(e,t)=>{const s={...y,label:e.key,...e};return[s,{...s,label:`${e.key}-rare`,key:`${e.key}-rare`,health:[3*s.health[0],3*s.health[1]],meleeDamage:[2*s.meleeDamage[0],2*s.meleeDamage[1]],rangeDamage:[2*s.rangeDamage[0],2*s.rangeDamage[1]],gold:[10*s.gold[0],10*s.gold[1]],...t??{}}]},u=[...g({key:"bug",label:"wasp",color:15968307,frame:24,health:[4,4],gold:[8,12],moveConfigs:i},{color:15476543,label:"hornet"}),...g({key:"snake",label:"cobra",frame:25,color:5944658,meleeDamage:[2,2],health:[9,9],gold:[18,25],moveConfigs:n},{color:11282503,label:"copperhead"}),...g({key:"anubis",frame:26,health:[60,60],meleeDamage:[4,4],gold:[250,250],color:15476543,moveConfigs:r}),...g({key:"spider",frame:27,label:"tarantula",color:10644799,health:[25,25],gold:[50,75],rangeDamage:[6,6],meleeDamage:[4,4],moveConfigs:i,rangeTarget:"player",rangeAccuracy:10,rangeSpeed:3e3,rangeBulletSpeed:120,rangeBulletSize:1,rangeCount:1,rangeShootChance:1,rangeCountDelay:0,rangeStartDelay:500,rangeSpread:0,rangeStopOnShoot:!1},{color:2891313,label:"widow"}),...g({key:"snail",frame:28,color:13408767,label:"snail",health:[45,45],gold:[75,100],meleeDamage:[6,6],moveConfigs:l},{color:3589620,label:"cone snail"}),...g({key:"knight",frame:29,color:11577272,health:[200,200],gold:[500,500],meleeDamage:[10,10],rangeDamage:[6,6],moveConfigs:h,rangeTarget:"player",rangeAccuracy:60,rangeSpeed:2500,rangeBulletSpeed:150,rangeBulletSize:2,rangeCount:3,rangeShootChance:1,rangeCountDelay:100,rangeStartDelay:500,rangeSpread:0,rangeStopOnShoot:!1}),...g({key:"roller",label:"roller",frame:30,color:14572858,health:[75,75],gold:[125,200],meleeDamage:[12,12],moveConfigs:o},{label:"speed demon",color:7022147}),...g({key:"ogre",label:"troll",frame:31,color:10644799,health:[100,100],gold:[175,250],meleeDamage:[12,12],rangeDamage:[15,15],moveConfigs:d,rangeTarget:"player",rangeAccuracy:10,rangeSpeed:2e3,rangeBulletSpeed:120,rangeBulletSize:3,rangeCount:1,rangeShootChance:.5,rangeCountDelay:0,rangeStartDelay:750,rangeSpread:0,rangeStopOnShoot:!1},{label:"ogre",color:5944658}),...g({key:"golem",frame:32,color:10931094,health:[400,400],gold:[2e3,2e3],meleeDamage:[15,15],rangeDamage:[15,15],moveConfigs:m,rangeTarget:"player",rangeAccuracy:0,rangeSpeed:2500,rangeBulletSpeed:110,rangeBulletSize:3,rangeCount:5,rangeShootChance:1,rangeCountDelay:0,rangeStartDelay:750,rangeSpread:30,rangeStopOnShoot:!1}),...g({key:"zombie",label:"shambler",frame:33,color:10348110,health:[200,200],gold:[500,1e3],meleeDamage:[15,15],moveConfigs:c},{label:"ghoul",color:3589620}),...g({key:"skeleton",label:"skeleton",frame:34,color:14601965,health:[150,150],gold:[500,1e3],meleeDamage:[10,10],rangeDamage:[12,12],rangeTarget:"player",rangeAccuracy:20,rangeSpeed:2500,rangeBulletSpeed:130,rangeBulletSize:2,rangeCount:3,rangeShootChance:.66,rangeCountDelay:150,rangeStartDelay:500,rangeSpread:0,rangeStopOnShoot:!1,moveConfigs:[{speed:15,moveTarget:"spawn",moveEventDelay:500,moveSpreadBias:.5,moveMaxDistance:30}]},{label:"bone walker",color:10931094}),...g({key:"death",frame:35,color:7022147,health:[1e3,1e3],gold:[1e3,2e3],meleeDamage:[27,27],rangeDamage:[20,20],rangeTarget:"player",rangeAccuracy:10,rangeSpeed:2500,rangeBulletSpeed:150,rangeBulletSize:3,rangeCount:7,rangeShootChance:.6,rangeCountDelay:0,rangeStartDelay:500,rangeSpread:50,rangeStopOnShoot:!1,moveConfigs:p})],v=(e,t,s=1.15)=>Math.round(e*Math.pow(s,t)),f=(e,t,s)=>({cost:t,effects:[{statKey:e,change:s}]}),x=(e,{fixedCosts:t,maxLevel:s,statChangePerLevel:a,factor:i})=>{const n=e=>"number"==typeof a?a:a(e);let r=t.map(((t,s)=>{const a=n(s);return f(e,t,a)}));for(let h=t.length;h<s;h++)r.push(f(e,v(t[t.length-1],h,i),n(h)));return r},k=[{key:"damageMeleeBase",type:"glove",frame:71,temporary:!1,text:"That costs {cost} gold.\nIt will increase your\nsword damage by {change}",effects:x("damageMeleeBase",{fixedCosts:[10,50,100,200,500,750],maxLevel:20,factor:1.2,statChangePerLevel:1})},{key:"speedMoveMulti",type:"wing",frame:70,temporary:!0,percent:!0,text:"That costs {cost} gold.\nIt will increase your\nspeed by {change}",effects:x("speedMoveMulti",{fixedCosts:[10,50,100,200,400,750,1500],maxLevel:7,factor:1.15,statChangePerLevel:.15})},{key:"healthMax",type:"potion",frame:51,temporary:!0,text:"That costs {cost} gold.\nIt will increase your\nmax health by {change}",effects:x("healthMax",{fixedCosts:[25,50,100,175,300,500,750,1e3,2500,5e3],maxLevel:9,factor:1.15,statChangePerLevel:10})},{key:"sizeBase",type:"up",frame:55,temporary:!1,text:"That costs {cost} gold.\nIt will increase your\nsize by {change}",effects:x("sizeBase",{fixedCosts:[500,2500,5e3,1e4],maxLevel:4,factor:2,statChangePerLevel:1})},{key:"damageMulti",type:"glove",frame:71,temporary:!0,percent:!0,text:"That costs {cost} gold.\nIt will increase your\ndamage multiplier by {change}",effects:x("damageMulti",{fixedCosts:[25,50,100,175,300,500,750],maxLevel:20,factor:1.1125,statChangePerLevel:.1})},{key:"rangeCount",type:"fire",frame:68,temporary:!1,text:"That costs {cost} gold.\nIt will increase your\nrange count by {change}",effects:x("rangeCount",{fixedCosts:[1e3,1e4,1e5],maxLevel:3,factor:2,statChangePerLevel:1})},{key:"speedMeleeMulti",type:"lightning",frame:54,temporary:!0,percent:!0,text:"That costs {cost} gold.\nIt will increase your\nattack speed multi by {change}",effects:x("speedMeleeMulti",{fixedCosts:[50,100,250,500],maxLevel:20,factor:1.125,statChangePerLevel:.15})},{key:"defenseMelee",type:"shield-round",frame:65,temporary:!0,text:"That costs {cost} gold.\nIt will decrease the\nmelee damage you take by {change}",effects:x("defenseMelee",{fixedCosts:[100,250,500,1e3],maxLevel:20,factor:1.2,statChangePerLevel:1})},{key:"defenseRanged",type:"shield-kite",frame:66,temporary:!0,text:"That costs {cost} gold.\nIt will increase your\nranged defense by {change}",effects:x("defenseRanged",{fixedCosts:[250,500,1e3],maxLevel:20,factor:1.2,statChangePerLevel:1})},{key:"damageRangeBase",type:"bow",frame:67,temporary:!1,text:"That costs {cost} gold.\nIt will increase your\nranged strength by {change}",effects:x("damageRangeBase",{fixedCosts:[500,1e3,2e3],maxLevel:20,factor:1.25,statChangePerLevel:2})},{key:"earnRateMulti",type:"bag",frame:69,temporary:!1,percent:!0,text:"That costs {cost} gold.\nIt will increase your\nearn rate multi by {change}",effects:x("earnRateMulti",{fixedCosts:[1e3,2500,6e3],maxLevel:12,factor:1.3,statChangePerLevel:.25})},{key:"damageMeleeFreq",type:"lightning",frame:54,temporary:!1,text:"That costs {cost} gold.\nIt will increase the number\nof times your sword hits\nper attack by {change}",effects:x("damageMeleeFreq",{fixedCosts:[5e3,25e3,5e4],maxLevel:3,factor:1.3,statChangePerLevel:1})}],M=.2,w=[{type:"fight",id:"desert-1a",name:"Desert 1a",cellIndex:6,cellMapFrame:1,x:.45,y:.77,enemies:[{key:"bug",chance:1,min:1,max:1},{key:"bug-rare",chance:M,min:1,max:1}]},{type:"fight",id:"desert-1b",name:"Desert 1b",cellIndex:6,cellMapFrame:1,x:.8,y:.6,enemies:[{key:"bug",chance:1,min:2,max:4},{key:"bug-rare",chance:M,min:1,max:1}]},{type:"fight",id:"desert-2a",name:"Desert 2a",cellIndex:7,cellMapFrame:1,x:.2,y:.53,enemies:[{key:"snake",chance:1,min:1,max:1},{key:"snake-rare",chance:M,min:1,max:1}]},{type:"fight",id:"desert-2b",name:"Desert 2b",cellIndex:7,cellMapFrame:1,x:.85,y:.54,enemies:[{key:"snake",chance:1,min:2,max:3},{key:"bug-rare",chance:.1,min:1,max:1},{key:"snake-rare",chance:.1,min:1,max:1}]},{type:"fight",id:"desert-3a",name:"Desert 3a",cellIndex:8,cellMapFrame:1,x:.15,y:.55,enemies:[{key:"snake",chance:1,min:2,max:3},{key:"bug",chance:1,min:1,max:2},{key:"bug-rare",chance:.1,min:1,max:1},{key:"snake-rare",chance:.1,min:1,max:1}]},{type:"fight",id:"desert-3b",name:"Desert 3b",cellIndex:8,cellMapFrame:1,x:.55,y:.4,enemies:[{key:"snake",chance:1,min:3,max:4},{key:"bug",chance:1,min:2,max:4},{key:"bug-rare",chance:.1,min:1,max:1},{key:"snake-rare",chance:.1,min:1,max:1}]},{type:"fight-boss",id:"desert-3c",name:"Desert Boss",cellIndex:8,cellMapFrame:1,x:.45,y:.17,enemies:[{key:"anubis",chance:1,min:1,max:1}]},{type:"shop",id:"desert-s1",name:"Desert Shop",cellIndex:6,cellMapFrame:1,x:.1,y:.85,items:["damageMeleeBase","speedMoveMulti"]},{type:"shop",id:"desert-s2",name:"Desert Shop 2",cellIndex:8,cellMapFrame:1,x:.44,y:.65,items:["healthMax","damageMulti","sizeBase"]},{type:"fight",id:"forest-1a",name:"Forest 1a",cellIndex:5,cellMapFrame:2,x:.575,y:.8,enemies:[{key:"spider",chance:1,min:1,max:1},{key:"spider-rare",chance:M,min:1,max:1}]},{type:"fight",id:"forest-1b",name:"Forest 1b",cellIndex:5,cellMapFrame:2,x:.16,y:.58,enemies:[{key:"spider",chance:1,min:3,max:4},{key:"spider-rare",chance:M,min:1,max:1}]},{type:"fight",id:"forest-2a",name:"Forest 2a",cellIndex:4,cellMapFrame:2,x:.8,y:.58,enemies:[{key:"snail",chance:1,min:2,max:2},{key:"snail-rare",chance:M,min:1,max:1}]},{type:"fight",id:"forest-2b",name:"Forest 2b",cellIndex:4,cellMapFrame:2,x:.15,y:.62,enemies:[{key:"snail",chance:1,min:2,max:3},{key:"spider-rare",chance:.1,min:1,max:1},{key:"snail-rare",chance:.1,min:1,max:1}]},{type:"fight",id:"forest-3a",name:"Forest 3a",cellIndex:3,cellMapFrame:2,x:.7,y:.67,enemies:[{key:"snail",chance:1,min:2,max:3},{key:"spider",chance:1,min:2,max:3},{key:"spider-rare",chance:.1,min:1,max:1},{key:"snail-rare",chance:.1,min:1,max:1}]},{type:"fight",id:"forest-3b",name:"Forest 3b",cellIndex:3,cellMapFrame:2,x:.18,y:.5,enemies:[{key:"snail",chance:1,min:3,max:4},{key:"spider",chance:1,min:2,max:4},{key:"spider-rare",chance:.1,min:1,max:1},{key:"snail-rare",chance:.1,min:1,max:1}]},{type:"fight-boss",id:"forest-3d",name:"Forest Boss",cellIndex:3,cellMapFrame:2,x:.2,y:.2,enemies:[{chance:1,min:1,max:1,key:"knight"}]},{type:"shop",id:"forest-s1",name:"Forest Shop",cellIndex:4,cellMapFrame:2,x:.5,y:.65,items:["rangeCount","speedMeleeMulti","defenseMelee"]},{type:"fight",id:"mountain-1a",name:"Mountain 1a",cellIndex:0,cellMapFrame:4,x:.45,y:.6,enemies:[{key:"roller",chance:1,min:2,max:3},{key:"roller-rare",chance:M,min:1,max:1}]},{type:"fight",id:"mountain-1b",name:"Mountain 1b",cellIndex:0,cellMapFrame:4,x:.6,y:.4,enemies:[{key:"ogre",chance:1,min:2,max:3},{key:"ogre-rare",chance:M,min:1,max:1}]},{type:"fight",id:"mountain-2a",name:"Mountain 2a",cellIndex:1,cellMapFrame:4,x:.36,y:.5,enemies:[{key:"roller",chance:1,min:1,max:2},{key:"ogre",chance:1,min:1,max:2},{key:"roller-rare",chance:.1,min:1,max:1},{key:"ogre-rare",chance:.1,min:1,max:1}]},{type:"fight",id:"mountain-2b",name:"Mountain 2b",cellIndex:1,cellMapFrame:4,x:.63,y:.7,enemies:[{key:"roller",chance:1,min:2,max:3},{key:"ogre",chance:1,min:2,max:3},{key:"roller-rare",chance:.1,min:1,max:1},{key:"ogre-rare",chance:.1,min:1,max:1}]},{type:"fight-boss",id:"mountain-2c",name:"Mountain Boss",cellIndex:1,cellMapFrame:4,x:.8,y:.87,enemies:[{chance:1,min:1,max:1,key:"golem"}]},{type:"shop",id:"mountain-s1",name:"Mountain Shop",cellIndex:0,cellMapFrame:4,x:.35,y:.8,items:["damageRangeBase","defenseRanged","earnRateMulti"]},{type:"fight",id:"castle-2a",name:"Castle 2a",cellIndex:2,cellMapFrame:5,x:.52,y:.8,enemies:[{key:"zombie",chance:1,min:2,max:3},{key:"zombie-rare",chance:M,min:1,max:1}]},{type:"fight",id:"castle-2b",name:"Castle 2b",cellIndex:2,cellMapFrame:5,x:.52,y:.55,enemies:[{key:"skeleton",chance:1,min:2,max:3},{key:"skeleton-rare",chance:M,min:1,max:1}]},{type:"fight",id:"castle-2c",name:"Castle 2c",cellIndex:2,cellMapFrame:5,x:.52,y:.4,enemies:[{key:"zombie",chance:1,min:2,max:3},{key:"skeleton",chance:1,min:2,max:3},{key:"zombie-rare",chance:.1,min:1,max:1},{key:"skeleton-rare",chance:.1,min:1,max:1}]},{type:"fight-boss",id:"castle-2e",name:"Castle Boss",cellIndex:2,cellMapFrame:5,x:.52,y:.2,enemies:[{chance:1,min:1,max:1,key:"death"}]},{type:"shop",id:"castle-s1",name:"Castle Shop",cellIndex:2,cellMapFrame:5,x:.1,y:.85,items:["damageMeleeFreq"]}],b=[6,7,8,5,4,3,0,1,2],C={shop:56,fight:57,"fight-boss":58},D="--sentient-edge-save-data",S=new class{constructor(){t(this,"game"),t(this,"init",(e=>{this.game=e,this.loadSave();const t=document.getElementById("mute-toggle");if(t){const s=this.values.muted;e.sound.setMute(2===s),t.innerText=2===s?"unmute":1===s?"mute all":"mute music",t.addEventListener("click",(()=>{const s=(S.values.muted+1)%3;this.set("muted",s),t.innerText=2===s?"unmute":1===s?"mute all":"mute music",e.sound.setMute(2===s),e.sound.getAllPlaying().forEach((e=>{e.key.includes("music")&&e.pause()}))}))}const s=document.getElementById("reset-save");s&&s.addEventListener("click",(()=>{window.confirm("Are you sure?")&&(this.set("hasReset",!0),localStorage.removeItem(D),window.location.reload())}))})),t(this,"loadSave",(()=>{const e=localStorage.getItem(D);e?this.setRegistryObject(JSON.parse(e)):this.initSave()})),t(this,"initSave",(()=>{this.setRegistryObject(P)})),t(this,"initSaveFinished",(()=>{this.setRegistryObject(T)})),t(this,"saveGame",(()=>{this.values.hasReset||localStorage.setItem(D,JSON.stringify(this.game.registry.values))})),t(this,"set",((e,t)=>{Array.isArray(t)&&(t=Array.from(new Set(t))),this.game.registry.set(e,t)})),t(this,"setRegistryObject",(e=>{Object.entries(e).forEach((([e,t])=>this.game.registry.set(e,t)))}))}get values(){return this.game.registry.values}get unlockedCellIndexes(){return b.filter(((e,t)=>6===e||w.filter((e=>e.cellIndex===b[t-1]&&e.type.includes("fight"))).every((e=>{var t;return null==(t=S.values.clearedNodes)?void 0:t.includes(e.id)}))))}},P={lastZoom:6,activeZoom:6,activeNode:"",lastNode:"",enemyHealth:-1,pauseMusic:!1,hasReset:!1,enemyName:"",enemyMaxHealth:-1,health:10,gold:0,muted:0,faceIndex:0,lastGold:0,deathCount:0,timePlayed:0,lastPlayerPosition:{x:0,y:0},hasWon:!1,hudText:"",showClearedArrow:!1,unlockedNodes:[],clearedNodes:[],upgrades:{healthMax:0,defenseMelee:0,defenseRanged:0,damageMulti:0,rangeCount:0,speedMoveMulti:0,earnRateMulti:0,speedMeleeMulti:0,damageMeleeBase:0,damageRangeBase:0,damageMeleeFreq:0,sizeBase:0}},T={...P,gold:999,unlockedNodes:w.map((e=>e.id)).slice(0,-2),clearedNodes:w.map((e=>e.id)).slice(0,-2),upgrades:{healthMax:9,defenseMelee:9,defenseRanged:9,damageMulti:9,rangeCount:9,speedMoveMulti:9,earnRateMulti:9,speedMeleeMulti:9,damageMeleeBase:9,damageMeleeFreq:3,damageRangeBase:9,sizeBase:9}};class B extends s.Scene{constructor(){super("Preloader")}init(){this.add.rectangle(512,384,468,32).setStrokeStyle(1,2236962);const e=this.add.rectangle(0,64,10,128,2236962).setOrigin(0,0);this.load.on("progress",(t=>{e.width=this.cameras.main.width*t}));try{this.registry.events.on("changedata",S.saveGame),S.init(this.game)}catch(t){console.log(t)}}preload(){this.load.setPath("assets"),this.load.spritesheet("map","map.png",{frameWidth:200,frameHeight:200}),this.load.bitmapFont("clarity","clarity.png","clarity.xml"),this.load.spritesheet("spritesheet","spritesheet.png",{frameWidth:32,frameHeight:32}),this.load.image("sword","sword.png"),this.load.image("title","title.png"),this.load.audio("sword-fall","sound/sword-fall.mp3"),this.load.audio("sword-land","sound/sword-land.mp3"),this.load.audio("music-menu","sound/cs-suggest-menu.mp3"),this.load.audio("music-game","sound/pp-game-music.mp3"),this.load.audio("music-win","sound/cs-zippy-win.mp3"),this.load.audio("player-enter","sound/cs-player-steps.mp3"),this.load.audio("player-exit","sound/cs-player-exit.mp3"),this.load.audio("player-attack","sound/cs-player-attack.mp3"),this.load.audio("player-hit","sound/cs-player-hurt.mp3"),this.load.audio("player-die","sound/cs-player-die.mp3"),this.load.audio("enemy-hit","sound/cs-enemy-die2.mp3"),this.load.audio("enemy-die","sound/cs-enemy-die.mp3"),this.load.audio("enemy-shoot","sound/cs-enemy-shoot.mp3"),this.load.audio("menu-select","sound/cs-menu-select.mp3"),this.load.audio("menu-confirm","sound/cs-menu-confirm.mp3"),this.load.audio("menu-deny","sound/cs-menu-deny.mp3"),this.load.audio("game-over","sound/cs-game-over.mp3"),this.load.audio("gold","sound/gold.mp3")}create(){this.anims.create({key:"player-idle",frames:[{key:"spritesheet",frame:0}],duration:500,repeatDelay:0,repeat:-1}),this.anims.create({key:"shopkeep-idle",frames:[{key:"spritesheet",frame:16}],duration:900,repeatDelay:0,repeat:-1}),this.anims.create({key:"shopkeep-talk",frames:[{key:"spritesheet",frame:16},{key:"spritesheet",frame:17},{key:"spritesheet",frame:18},{key:"spritesheet",frame:19},{key:"spritesheet",frame:18},{key:"spritesheet",frame:17}],duration:900,repeatDelay:0,repeat:-1}),this.anims.create({key:"player-walk",frames:[{key:"spritesheet",frame:1},{key:"spritesheet",frame:2}],duration:500,repeatDelay:0,repeat:-1}),this.anims.create({key:"player-idle-sword",frames:[{key:"spritesheet",frame:3}],duration:500,repeatDelay:0,repeat:-1}),this.anims.create({key:"player-walk-sword",frames:[{key:"spritesheet",frame:4},{key:"spritesheet",frame:5}],duration:500,repeatDelay:0,repeat:-1}),this.anims.create({key:"player-stab",frames:[{key:"spritesheet",frame:6}],duration:500,repeatDelay:0,repeat:-1}),this.scene.start("Menu")}}const I={damage:1,count:1,spread:0,accuracy:0,delay:0,speed:120,size:1},N=(e,t,s,a,i)=>{const{spread:n,count:r,delay:h,accuracy:l,speed:o,size:d,damage:c}={...I,...i??{}},m=a.x-s.x,p=a.y-s.y,y=Math.atan2(p,m),g=n*Math.PI/180;for(let u=0;u<r;u++)e.time.delayedCall(h*u,(()=>{const e=t.get(),a=(u-(r-1)/2)*g,i=Phaser.Math.RND.between(-l,+l)/100;null==e||e.spawn(s,y+a+i,o,d,c)}))};class F extends Phaser.Physics.Arcade.Sprite{constructor(e,s,a){super(e,s,a,"spritesheet",42),t(this,"damage"),t(this,"takeDamage",(e=>{this.active&&this.visible&&this.die()})),t(this,"die",(()=>{this.setActive(!1).setVisible(!1)})),t(this,"update",(()=>{Phaser.Geom.Intersects.RectangleToRectangle(new Phaser.Geom.Rectangle(this.x,this.y,1,1),this.scene.physics.world.bounds)||this.die()})),this.scene.add.existing(this),this.scene.physics.add.existing(this),this.damage=1,this.setOrigin(.5,.5).setTint(15476543).setDepth(10)}spawn(e,t,s,a=1,i=1){this.setActive(!0).setVisible(!0),this.setPosition(e.x,e.y),this.setSize(2+2*a,2+2*a),this.setFrame(41+a),this.setVelocity(Math.cos(t)*s,Math.sin(t)*s),this.damage=i}}class E{constructor(e,s={}){t(this,"scene"),t(this,"sprite"),t(this,"spriteBody"),t(this,"sword"),t(this,"head"),t(this,"headBody"),t(this,"swordHit"),t(this,"swordHitBody"),t(this,"goldHit"),t(this,"goldHitBody"),t(this,"swordBody"),t(this,"bullets"),t(this,"attackReady"),t(this,"health"),t(this,"speedMultiplier"),t(this,"justHit"),t(this,"shouldMove"),t(this,"cursor"),t(this,"shoot",((e=0,t=20)=>{if(!this.sprite.active||0===e)return;const s=this.sprite.flipX?-1:1,a={x:this.sprite.x+20*s,y:this.sprite.y-this.spriteBody.halfHeight},i={x:a.x+50*s,y:a.y},n=this.stats.damageRangeBase*this.stats.damageMulti;N(this.scene,this.bullets,a,i,{damage:n,count:e,spread:t,speed:120,size:Phaser.Math.Clamp(Math.ceil(this.stats.damageRangeBase/8),1,4)})})),t(this,"setSwordPosition",(()=>{const e=this.sprite;let t=10*e.scaleX,s=e.y-(this.attackReady?20:16)*e.scaleX;0!==this.sword.angle&&(t+=13,s+=7,this.sword.setFrame(this.swordConfig.frame-1));let a=e.x+t*(this.sword.flipX?-1:1);this.sword.setPosition(a,s);const{ox:i,oy:n,sx:r,sy:h}=this.swordConfig,l=e.x+(this.sword.flipX?-i:i),o=e.y+n;this.swordHit.setPosition(l,o).setOrigin(this.sword.flipX?1:0,.5).setSize(r,h),this.head.setPosition(e.x,e.y-(0!==this.sword.angle?13:14)*e.scaleX),this.goldHit.setPosition(e.x,e.y-10);let d=8+2*S.values.faceIndex;0!==this.sword.angle&&(d+=1),this.head.setFrame(d)})),t(this,"takeDamage",(async(e=0,t=!1)=>{!this.justHit&&this.sprite.active&&this.sprite.visible&&(e-=t?this.stats.defenseRanged:this.stats.defenseMelee,this.attackReady&&(e*=.5),this.scene.sound.play("player-hit"),e=Phaser.Math.Clamp(e,0,999),this.justHit=!0,this.health-=e,S.set("health",this.health),this.health<=0?this.die():(this.sprite.setTintFill(15476543),this.head.setTintFill(15476543),await this.delay(250),this.sprite.clearTint(),this.head.clearTint(),await this.delay(50),this.justHit=!1))})),t(this,"die",(async()=>{this.scene.sound.play("player-die"),this.sprite.setActive(!1).setVisible(!1),this.head.setActive(!1).setVisible(!1),this.shouldMove=!1,this.stop(),this.scene.add.sprite(this.sprite.x,this.sprite.y,"spritesheet",7).setOrigin(.5,1),this.sword.setAngle(90).setFrame(this.swordConfig.frame-1).setPosition(this.sprite.x+20,this.sprite.y-4),S.set("gold",0),S.set("deathCount",S.values.deathCount+1);const e=S.values.upgrades;k.filter((e=>e.temporary)).forEach((t=>{e[t.key]=0})),S.set("upgrades",e),S.set("faceIndex",(S.values.faceIndex+1)%4),await this.delay(1e3),S.set("pauseMusic",!0),this.scene.cameras.main.fadeOut(1500,0,0,0,((e,t)=>{1===t&&(this.scene.sound.play("game-over"),this.scene.time.delayedCall(5e3,(()=>{S.set("pauseMusic",!1),this.scene.scene.start("WorldMap")})))}))})),t(this,"isNearEdge",(()=>this.sprite.x<10||this.sprite.x>this.scene.cameras.main.width-10||this.sprite.y<20||this.sprite.y>this.scene.cameras.main.height-10)),t(this,"delay",(e=>new Promise((t=>{this.scene.time.delayedCall(e,t)})))),this.scene=e;const a=this.scene.cameras.main.width,i=s.x??a/2,n=s.y??a/2,r=s.scale??1;this.speedMultiplier=s.speedMultiplier??1,this.health=S.values.health,this.justHit=!1,this.attackReady=!0,this.shouldMove=!1,this.bullets=this.scene.add.group({classType:F,maxSize:10,runChildUpdate:!0}),this.shouldMove=!1,this.scene.game.events.on("blur",(()=>{this.shouldMove=!1})),this.scene.game.events.on("focus",(()=>{this.sprite.active&&(this.shouldMove=!0)})),this.scene.input.on("pointermove",(()=>{document.hasFocus()&&this.sprite.active&&(this.shouldMove=!0)})),this.sprite=this.scene.physics.add.sprite(i,n,"spritesheet",0),this.spriteBody=this.sprite.body,this.spriteBody.setSize(15,15),this.sprite.setScale(r).setCollideWorldBounds(!0).setOrigin(.5,1).setOffset(8,16).setDepth(1),this.swordHit=this.scene.physics.add.sprite(i,n,"spritesheet",41).setVisible(!1),this.swordHitBody=this.swordHit.body;const h=this.swordConfig.frame;this.sword=this.scene.physics.add.sprite(i,n,"spritesheet",h),this.sword.setScale(r).setOrigin(.5,.7).setDepth(2).setSize(.1,.1),this.swordBody=this.sword.body,this.head=this.scene.physics.add.sprite(i,n,"spritesheet",8),this.head.setScale(r).setOrigin(.5,.5).setDepth(2).setSize(.1,.1),this.headBody=this.head.body;const l=29*this.stats.earnRateMulti;this.goldHit=this.scene.add.circle(0,0,l),this.scene.physics.add.existing(this.goldHit),this.goldHitBody=this.goldHit.body,this.goldHitBody.setCircle(l),this.setSwordPosition(),this.cursor=this.scene.add.circle(this.sprite.x,this.sprite.y,2,16711680).setVisible(!1);let o={x:0,y:0},d={x:0,y:0};this.scene.input.on("pointermove",(e=>{e.event instanceof TouchEvent&&this.cursor.setPosition(d.x+(e.x-o.x),d.y+(e.y-o.y)).setVisible(!0)})),this.scene.input.on("pointerdown",(e=>{e.event instanceof TouchEvent&&(o={x:e.x,y:e.y},d={x:this.cursor.x,y:this.cursor.y})}))}update(){if(!this.sprite.active)return;const e=this.cursor.visible?this.cursor:this.scene.input.activePointer,t=this.sprite,s=this.sword,a=e.x-t.x,i=e.y-t.y;if(Math.abs(a)>2&&(this.sprite.setFlipX(a<0),this.sword.setFlipX(a<0),0!==s.angle&&s.setAngle(s.flipX?-90:90)),this.setSwordPosition(),!this.shouldMove||this.scene.scene.isActive("Stats"))return void this.stop();const n=Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y),r=this.sword.visible&&this.attackReady?"-sword":"";if(n>2){const e=Math.atan2(i,a),s=this.attackReady?1:.66,n=42*this.stats.speedMoveMulti*this.speedMultiplier*s,h=Math.cos(e)*n,l=Math.sin(e)*n;this.spriteBody.setVelocity(h,l),this.swordBody.setVelocity(h,l),this.head.setVelocity(h,l),0===this.sword.angle&&t.anims.play(`player-walk${r}`,!0)}else this.stop();const h=(this.sprite.y-14)/100;this.sprite.setDepth(3+h),this.sword.setDepth(3+h),this.head.setDepth(3+h)}stop(){this.swordBody.setVelocity(0),this.spriteBody.setVelocity(0),this.head.setVelocity(0);const e=this.sword.visible&&this.attackReady?"-sword":"";0===this.sword.angle&&this.sprite.anims.play(`player-idle${e}`)}async swing(){this.sprite.active&&0===this.sword.angle&&this.attackReady&&(this.scene.sound.play("player-attack"),this.attackReady=!1,this.sprite.anims.play("player-stab",!0),this.sword.setAngle(this.sword.flipX?-90:90),this.shoot(this.stats.rangeCount),this.setSwordPosition(),await this.delay(500),this.sprite.active&&(this.sword.setAngle(0).setFrame(this.swordConfig.frame),await this.delay(1200/this.stats.speedMeleeMulti),this.sprite.active&&(this.attackReady=!0)))}get swordConfig(){return R[this.stats.sizeBase-1]}get stats(){return k.reduce(((e,t)=>{var s,a,i;const n=(null==(s=S.values.upgrades)?void 0:s[t.key])??0;return null==(i=null==(a=t.effects)?void 0:a.slice(0,n))||i.forEach((t=>{t.effects.forEach((t=>{var s;e[s=t.statKey]??(e[s]=0),e[t.statKey]+=t.change}))})),e}),{...A})}}const A={healthMax:10,defenseMelee:0,defenseRanged:0,rangeCount:0,sizeBase:1,speedMoveMulti:1,damageMeleeBase:1,damageMeleeFreq:1,damageRangeBase:4,damageMulti:1,earnRateMulti:1,speedMeleeMulti:1},R=[{frame:41,ox:6,oy:-10,sx:8,sy:5},{frame:73,ox:8,oy:-10,sx:13,sy:6},{frame:75,ox:9,oy:-10,sx:14,sy:8},{frame:77,ox:12,oy:-10,sx:18,sy:9},{frame:79,ox:16,oy:-9,sx:28,sy:11}];class O extends Phaser.Physics.Arcade.Sprite{constructor(e,s,a){super(e,s,a,"spritesheet",0),t(this,"health"),t(this,"maxHealth"),t(this,"color"),t(this,"currentAngle"),t(this,"_flop"),t(this,"_moveConfigIndex"),t(this,"target"),t(this,"spawnPosition"),t(this,"key"),t(this,"justHit"),t(this,"forceStop"),t(this,"moveEvent"),t(this,"shootEvent"),t(this,"flopEvent"),t(this,"spriteBody"),t(this,"particles"),t(this,"onMoveEvent",(async()=>{if(this.forceStop||!this.active)return;this.moveConfig.flashDuration&&this.flash(this.moveConfig.flashDuration,8);const e=Phaser.Math.Distance.BetweenPoints(this,this.target),t=Phaser.Math.Clamp(e/this.moveConfig.moveMaxDistance,0,1),s=Math.pow(t,2),a=Math.atan2(this.target.y-this.y,this.target.x-this.x);let i=null;this.scene.enemies.children.iterate((e=>{const t=e;if(t===this)return!0;if(Phaser.Math.Distance.BetweenPoints(this,t)<20){const e=Phaser.Math.Angle.BetweenPoints(this,t);i=e+Math.PI}return!0}));const n=Phaser.Math.RND.between(-180,180),r=H(this.currentAngle,n,this.moveConfig.moveSpreadBias);this.currentAngle="number"==typeof i?i:H(r,a,s),this.spriteBody.setVelocity(Math.cos(this.currentAngle)*this.moveConfig.speed,Math.sin(this.currentAngle)*this.moveConfig.speed),0!==this.spriteBody.velocity.x&&this.setFlipX(this.spriteBody.velocity.x>0),this.moveEvent=this.scene.time.addEvent({delay:this.moveConfig.moveEventDelay,callback:this.onMoveEvent}),"sequence"===this.stats.moveOrder?(this._moveConfigIndex++,this._moveConfigIndex>=this.stats.moveConfigs.length&&(this._moveConfigIndex=0)):this._moveConfigIndex=Phaser.Math.RND.between(0,this.stats.moveConfigs.length-1),this.setTarget()})),t(this,"shoot",(async()=>{if(!this.active)return;if(!(Phaser.Math.RND.frac()<=this.stats.rangeShootChance))return;this.stats.rangeStopOnShoot&&(this.forceStop=!0),this.spriteBody.setVelocity(0,0);const e=this.scene.player;let t={x:e.sprite.x,y:e.sprite.y-e.spriteBody.halfHeight};if("random"===this.stats.rangeTarget){const e=this.scene.cameras.main.width;t={x:Phaser.Math.RND.between(0,e),y:Phaser.Math.RND.between(0,e)}}if(await this.flash(this.stats.rangeStartDelay),!this.active||!e.sprite.active)return;const s=Phaser.Math.RND.between(this.stats.rangeDamage[0],this.stats.rangeDamage[1]);this.scene.sound.play("enemy-shoot"),N(this.scene,this.scene.bullets,this,t,{damage:s,count:this.stats.rangeCount,spread:this.stats.rangeSpread,accuracy:this.stats.rangeAccuracy,delay:this.stats.rangeCountDelay,speed:this.stats.rangeBulletSpeed,size:this.stats.rangeBulletSize}),this.forceStop=!1})),t(this,"flash",(async(e=800,t=6)=>{let s=!1;this.scene.time.addEvent({delay:e/t,repeat:t,callback:()=>{s?(this.setTintFill(16777215),s=!1):(this.clearTint(),this.setTint(this.color),s=!0)}}),await this.delay(e+100)})),t(this,"takeDamage",(async(e=0,t=150,s=!1)=>{var a;(!this.justHit||s)&&this.active&&this.visible&&(s||(this.justHit=!0),this.health-=e,S.set("enemyHealth",this.health),S.set("enemyName",this.stats.label),S.set("enemyMaxHealth",this.maxHealth),null==(a=this.scene.enemyNameDebounceEvent)||a.destroy(),this.scene.enemyNameDebounceEvent=this.scene.time.delayedCall(2e3,(()=>S.set("enemyName",""))),this.scene.sound.play("enemy-hit"),this.setTintFill(15476543),this.health<=0?this.die():(await this.delay(t),this.setTint(this.color),s||(this.justHit=!1)))})),t(this,"die",(async()=>{var e,t,s;this.active&&(this.particles.explode(8,this.x,this.y),this.scene.sound.play("enemy-die"),this.setVelocity(0),this.scene.tweens.add({targets:this,alpha:0,duration:400,onComplete:()=>{this.setCollideWorldBounds(!1),this.setPosition(-500,-500),this.setVisible(!1)}}),this.setActive(!1),null==(e=this.shootEvent)||e.destroy(),null==(t=this.moveEvent)||t.destroy(),null==(s=this.flopEvent)||s.destroy(),await this.delay(50))})),t(this,"delay",(e=>new Promise((t=>{this.scene.time.delayedCall(e,t)})))),this.scene.add.existing(this),this.scene.physics.add.existing(this),this.setSize(20,20),this.justHit=!1,this.setOrigin(.5,.5),this.setDepth(3),this.spriteBody=this.body,this.currentAngle=0,this._flop=0,this.particles=this.scene.add.particles(0,0,"spritesheet",{speed:90,lifespan:600,alpha:{start:.6,end:0},angle:{start:0,end:360,steps:8},frame:{frames:[42,43],cycle:!0}}).stop().setDepth(20)}update(){this.setDepth(3+this.y/100)}spawn(e,t,s){this.key=s;const a=Phaser.Math.Clamp(e,20,this.scene.cameras.main.width-20),i=Phaser.Math.Clamp(t,20,this.scene.cameras.main.width-20);this.setPosition(a,i),this.setCollideWorldBounds(!0),this.maxHealth=Phaser.Math.RND.between(this.stats.health[0],this.stats.health[1]),this.health=this.maxHealth,this.spawnPosition={x:this.x,y:this.y},this._moveConfigIndex=0,this.setTarget(),this.setFrame(this.stats.frame),this.color=this.stats.color,this.setTint(this.color),this.particles.setParticleTint(this.color),this.scene.time.delayedCall(Phaser.Math.RND.between(0,500),(()=>{this.stats.rangeSpeed>0&&(this.shootEvent=this.scene.time.addEvent({delay:this.stats.rangeSpeed,repeat:-1,callback:this.shoot})),this.moveEvent=this.scene.time.addEvent({delay:0,callback:this.onMoveEvent}),this.flopEvent=this.scene.time.addEvent({repeat:-1,delay:300,callback:()=>{this.y+=1*(this._flop?-1:1),this._flop=this._flop?0:1}})}))}get stats(){return u.find((e=>e.key===this.key))}get meleeDamage(){return Phaser.Math.RND.between(this.stats.meleeDamage[0],this.stats.meleeDamage[1])}get rangeDamage(){return Phaser.Math.RND.between(this.stats.rangeDamage[0],this.stats.rangeDamage[1])}get gold(){return Phaser.Math.RND.between(this.stats.gold[0],this.stats.gold[1])}get moveConfig(){return this.stats.moveConfigs[this._moveConfigIndex]}setTarget(){const e=this.scene.cameras.main.width;if(this.target=this.spawnPosition,"player"===this.moveConfig.moveTarget)this.target=this.scene.player.sprite;else if("center"===this.moveConfig.moveTarget)this.target={x:e/2,y:e/2};else if("random"===this.moveConfig.moveTarget){const t=Phaser.Math.RND.between(20,e-20),s=Phaser.Math.RND.between(20,e-20);this.target={x:s,y:t}}}}const H=(e,t,s)=>{const a=Phaser.Math.Angle.Normalize(e);let i=Phaser.Math.Angle.Normalize(t)-a;return i>Math.PI?i-=2*Math.PI:i<-Math.PI&&(i+=2*Math.PI),Phaser.Math.Angle.Wrap(a+i*Phaser.Math.Clamp(s,0,1))};class L extends Phaser.Physics.Arcade.Sprite{constructor(e,s,a){super(e,s,a,"spritesheet",48),t(this,"amount"),t(this,"collected"),t(this,"collectedTriggered"),this.scene.add.existing(this),this.scene.physics.add.existing(this),this.setSize(8,8),this.amount=1,this.collected=!1,this.collectedTriggered=!1}spawn(e,t,s=1){this.setActive(!0).setVisible(!0).setPosition(e,t),this.amount=s,this.setFrame(48).setAcceleration(0).setVelocity(0),this.collected=!1,this.collectedTriggered=!1,this.setTint(15968307),s>=50&&(this.setFrame(49),this.setTint(15476543)),s>=500&&(this.setFrame(50),this.setTint(3589620))}pickup(){if(!this.active||!this.visible)return;this.setActive(!1).setVisible(!1).setPosition(-20,-20).setAcceleration(0).setVelocity(0),this.scene.sound.play("gold",{volume:4,rate:Phaser.Math.RND.realInRange(.8,1.2)});const e=Math.round(this.amount*this.scene.player.stats.earnRateMulti);S.set("gold",S.values.gold+e),S.set("lastGold",e)}update(){if(this.collected&&this.active){const e=Phaser.Math.Angle.Between(this.x,this.y,this.scene.player.sprite.x,this.scene.player.sprite.y-10),t=100;this.setVelocity(Math.cos(e)*t,Math.sin(e)*t)}}}class z extends s.Scene{constructor(){super("Fight"),t(this,"background"),t(this,"player"),t(this,"enemies"),t(this,"bullets"),t(this,"gold"),t(this,"node"),t(this,"canAttack"),t(this,"edgeTimer"),t(this,"isLeaving"),t(this,"enemyNameDebounceEvent"),t(this,"lastGoldAmountDebounceEvent"),t(this,"hitEnemyBullet",((e,t)=>{var s;const a=t,i=e;i.active&&a.active&&(a.takeDamage(1),i.takeDamage(this.player.stats.damageRangeBase*this.player.stats.damageMulti,500/this.player.stats.damageMeleeFreq,!0),i.health<=0&&(null==(s=this.gold.get())||s.spawn(i.x,i.y,i.gold),this.checkIfFinished()))})),t(this,"hitPlayerBullet",((e,t)=>{if(!this.player.sprite.active)return;const s=t;this.player.takeDamage(s.damage,!0),s.takeDamage(1)})),t(this,"hitPlayerEnemy",((e,t)=>{const s=t;this.player.sprite.active&&s.active&&this.player.takeDamage(s.meleeDamage)})),t(this,"hitPlayerGold",((e,t)=>{var s;const a=t;if(!a.active)return;a.pickup(),null==(s=this.lastGoldAmountDebounceEvent)||s.destroy(),this.lastGoldAmountDebounceEvent=this.time.delayedCall(1500,(()=>{S.set("lastGold",0)}));const i=this.enemies.children.entries.every((e=>!e.active)),n=this.gold.children.entries.every((e=>!e.active));i&&n&&"castle-2e"!==this.node.id&&this.time.delayedCall(800,(()=>this.backToMap()))})),t(this,"hitGrabGold",((e,t)=>{const s=t;s.active&&!s.collectedTriggered&&(s.collectedTriggered=!0,this.time.delayedCall(150,(()=>{s.collected=!0})))})),t(this,"hitSwordEnemy",((e,t)=>{var s;if(0===this.player.sword.angle||!this.player.sprite.active)return;const a=t;a.active&&(a.takeDamage(this.player.stats.damageMeleeBase*this.player.stats.damageMulti,500/this.player.stats.damageMeleeFreq),a.health<=0&&(null==(s=this.gold.get())||s.spawn(a.x,a.y,a.gold),this.checkIfFinished()))}))}create(){const{width:e,height:t}=this.cameras.main;this.background=this.add.sprite(e/2,t/2,"map",1),this.isLeaving=!1,this.edgeTimer=0,this.physics.world.setBounds(-10,0,e+15,t+10),this.cameras.main.fadeFrom(250,0,0,0),this.enemies=this.add.group({classType:O,maxSize:100,runChildUpdate:!0}),this.gold=this.add.group({classType:L,maxSize:100,runChildUpdate:!0}),this.player=new E(this),this.bullets=this.add.group({classType:F,maxSize:100,runChildUpdate:!0}),this.node=w.find((e=>e.id===S.values.activeNode)),this.node.enemies&&this.spawnEnemies(),this.node.cellMapFrame&&this.background.setFrame(this.node.cellMapFrame),this.canAttack=!1,this.time.delayedCall(300,(()=>{this.canAttack=!0})),this.input.on("pointerup",(e=>{e.event instanceof TouchEvent&&this.time.now-e.downTime<300&&this.canAttack&&this.player.swing()}))}update(){this.player.update(),this.player.isNearEdge()?(this.edgeTimer++,this.edgeTimer>120&&this.player.sprite.active&&this.backToMap()):this.edgeTimer=0,this.physics.overlap(this.player.swordHit,this.enemies,this.hitSwordEnemy),this.physics.overlap(this.player.sprite,this.enemies,this.hitPlayerEnemy),this.physics.overlap(this.player.sprite,this.gold,this.hitPlayerGold),this.physics.overlap(this.player.goldHit,this.gold,this.hitGrabGold),this.physics.overlap(this.player.sprite,this.bullets,this.hitPlayerBullet),this.physics.overlap(this.enemies,this.player.bullets,this.hitEnemyBullet),this.input.activePointer.event instanceof MouseEvent&&this.input.activePointer.isDown&&this.canAttack&&this.player.swing()}spawnEnemies(){var e;const t=this.cameras.main.width,s=t/3*.65,a=s/2+(t-3*s)/2;let i=[0,1,2,3,5,6,7,8];null==(e=this.node.enemies)||e.forEach((e=>{if(!(Phaser.Math.RND.frac()<=e.chance))return;const t=Phaser.Math.RND.between(e.min,e.max);for(let n=0;n<t;n++){const t=Phaser.Math.RND.pick(i);i=i.filter((e=>e!==t));let n=t%3*s+a,r=Math.floor(t/3)*s+a;n+=Phaser.Math.RND.between(-6,6),r+=Phaser.Math.RND.between(-6,6),this.enemies.get().spawn(n,r,e.key)}}))}checkIfFinished(){if(!(S.values.hasWon||"castle-2e"!==this.node.id&&S.values.clearedNodes.includes(this.node.id))&&this.enemies.children.entries.every((e=>!e.active))){const e=S.values.clearedNodes??[],t=Array.from(new Set([...e,this.node.id]));S.set("clearedNodes",t),w.filter((e=>e.cellIndex===S.values.activeZoom&&e.type.includes("fight"))).every((e=>t.includes(e.id)))&&"castle-2e"!==this.node.id&&S.set("showClearedArrow",!0),w.filter((e=>e.type.includes("fight"))).every((e=>t.includes(e.id)))&&(S.set("hasWon",!0),this.scene.get("Hud").shutdown(),this.cameras.main.fadeOut(1e3,0,0,0,((e,t)=>{1===t&&(this.scene.stop("Hud"),this.scene.start("Menu"))})))}}backToMap(){this.isLeaving||(this.isLeaving=!0,this.sound.play("player-exit",{volume:.6}),this.cameras.main.fadeOut(250,0,0,0,((e,t)=>{1===t&&(this.scene.start("CellMap"),S.set("enemyName",""),S.set("lastGold",0))})))}}class V extends s.Scene{constructor(){super("Shop"),t(this,"background"),t(this,"shopkeep"),t(this,"teleporterLeft"),t(this,"teleporterRight"),t(this,"player"),t(this,"isLeaving"),t(this,"items"),t(this,"activeItemKey"),t(this,"allowPurchase"),t(this,"node"),t(this,"createItem",((e,t,s)=>{const a=k.find((t=>t.key===e)),{width:i,height:n}=this.cameras.main;let r=0;2===s?r=0===t?-25:25:3===s&&(r=0===t?-50:1===t?0:50);const h=8+2*S.values.faceIndex;return this.add.sprite(i/2+r-8,n/2+(a.temporary?10:2),"spritesheet",a.temporary?h:40).setOrigin(.5,.5),this.add.sprite(i/2+r+8,n/2+10,"spritesheet",a.frame),this.physics.add.sprite(i/2+r,n/2+10,"spritesheet",10).setVisible(!1).setOrigin(.5,.5).setSize(30,20).setData("key",e)})),t(this,"getTeleporterDestinations",(()=>{const e=w.filter((e=>"shop"===e.type&&S.unlockedCellIndexes.includes(e.cellIndex))).sort(((e,t)=>e.name.localeCompare(t.name))),t=e.findIndex((e=>e.id==S.values.activeNode)),s=e.length-1,a=t-1>=0?t-1:s,i=t+1<=s?t+1:0;return e.length<=1?{left:void 0,right:void 0}:{left:e[a],right:e[i]}})),t(this,"teleport",(e=>{const{left:t,right:s}=this.getTeleporterDestinations();t&&s&&(S.set("lastPlayerPosition",{x:this.player.sprite.x,y:this.player.sprite.y}),e.includes("left")?(S.set("activeNode",t.id),S.set("activeZoom",t.cellIndex)):(S.set("activeNode",s.id),S.set("activeZoom",s.cellIndex)),this.cameras.main.fadeOut(250,0,0,0,((e,t)=>{1===t&&this.scene.start("Shop")})))})),t(this,"buyItem",(e=>{var t;if(!this.allowPurchase)return;if(e.includes("teleporter"))return void this.teleport(e);this.allowPurchase=!1,this.time.delayedCall(1500,(()=>{this.allowPurchase=!0}));const s=k.find((t=>t.key===e)),a=S.values.gold,i=S.values.upgrades[e],n=null==(t=s.effects[i])?void 0:t.cost;if(i>=s.effects.length)this.sound.play("menu-deny",{volume:2}),this.shopkeepTalk("You've already maxed it out");else if(a>=n){S.set("gold",a-n);const t=S.values.upgrades;S.set("upgrades",{...t,[e]:(t[e]??0)+1}),this.sound.play("menu-confirm"),this.shopkeepTalk("Pleasure doing business\nwith you! :)",1500)}else this.sound.play("menu-deny",{volume:2}),this.shopkeepTalk("You can't afford that",1500);this.player.sword.setFrame(this.player.swordConfig.frame)})),t(this,"shopkeepTalk",((e,t)=>{S.set("hudText",e),this.shopkeep.play("shopkeep-talk",!0),t&&this.time.delayedCall(t,(()=>{S.set("hudText","")}))})),t(this,"hitPlayerTeleporter",((e,t)=>{let s="teleporter-left";if(this.activeItemKey)return;const{left:a,right:i}=this.getTeleporterDestinations();a&&i&&(t===this.teleporterLeft?(s="teleporter-left",this.shopkeepTalk(`This will send you to \n${a.name}`)):t===this.teleporterRight&&(s="teleporter-right",this.shopkeepTalk(`This will send you to \n${i.name}`)),s!==this.activeItemKey&&this.sound.play("menu-select",{volume:2}),this.activeItemKey=s)})),t(this,"hitPlayerItem",((e,t)=>{const s=t.getData("key");s!==this.activeItemKey&&this.sound.play("menu-select",{volume:2}),this.activeItemKey=s;const a=k.find((e=>e.key===this.activeItemKey)),i=S.values.upgrades[this.activeItemKey],n=a.effects[i],r=null==n?void 0:n.cost,h=null==n?void 0:n.effects[0].change;""===S.values.hudText&&(i<a.effects.length?this.shopkeepTalk(a.text.replace("{cost}",`${r}`).replace("{change}",a.percent?100*h+"%":`${h}`)):this.shopkeepTalk("You've already maxed it out"))}))}create(){const{width:e,height:t}=this.cameras.main;this.cameras.main.fadeFrom(250,0,0,0),this.background=this.add.sprite(e/2,t/2,"map",6),this.shopkeep=this.add.sprite(e/2,t/2-10,"spritesheet",0).play("shopkeep-idle").setOrigin(.5,1),this.getTeleporterDestinations().left&&(this.teleporterRight=this.physics.add.sprite(e-30,t-40,"spritesheet",55).setOrigin(.5,.5).setAngle(90),this.teleporterLeft=this.physics.add.sprite(30,t-40,"spritesheet",55).setOrigin(.5,.5).setAngle(270)),this.isLeaving=!1,this.activeItemKey=void 0,this.allowPurchase=!0;let s=S.values.lastPlayerPosition.x??e/2,a=S.values.lastPlayerPosition.y??t/2;this.player=new E(this,{x:s,y:a}),this.node=w.find((e=>e.id===S.values.activeNode));const i=this.node.items??[];this.items=i.map(((e,t)=>this.createItem(e,t,i.length))),this.input.on("pointerdown",(e=>{this.activeItemKey&&e.event instanceof MouseEvent&&this.buyItem(this.activeItemKey)})),this.input.on("pointerup",(e=>{this.activeItemKey&&e.event instanceof TouchEvent&&this.time.now-e.downTime<300&&this.buyItem(this.activeItemKey)}))}update(){this.player.update(),this.player.isNearEdge()&&this.backToMap();const e=this.physics.overlap(this.player.sprite,[this.teleporterLeft,this.teleporterRight],this.hitPlayerTeleporter);this.physics.overlap(this.player.sprite,this.items,this.hitPlayerItem)||e||(S.set("hudText",""),this.shopkeep.play("shopkeep-idle"),this.activeItemKey=void 0)}backToMap(){this.isLeaving||(this.isLeaving=!0,this.sound.play("player-exit",{volume:.6}),this.cameras.main.fadeOut(250,0,0,0,((e,t)=>{1===t&&this.scene.start("CellMap")})))}}class G extends s.Scene{constructor(){super("WorldMap"),t(this,"background"),t(this,"player"),t(this,"covers"),t(this,"removeCover",(e=>{this.covers[e].setAlpha(0),this.covers[e].body.enable=!1}))}create(){this.background=this.add.image(0,0,"map").setOrigin(0),this.covers=this.createCovers(),this.updateCovers(),S.set("hudText",""),this.player=new E(this,{x:0,y:0,scale:.5,speedMultiplier:.4});const e=S.values.lastZoom%3,t=Math.floor(S.values.lastZoom/3),{x:s,y:a}=S.values.lastPlayerPosition;this.player.sprite.setPosition(66*e+s/3,66*t+a/3),-1!==S.values.activeZoom?this.goToCell(S.values.activeZoom,!1):this.cameras.main.fadeFrom(250,0,0,0),this.input.once("pointerdown",(()=>{this.sound.play("player-enter",{volume:.5}),this.cameras.main.fadeOut(250,0,0,0,((e,t)=>{1===t&&this.goToCell(this.getPlayerCellIndex())}))}))}update(){this.player.update(),this.physics.collide(this.covers,this.player.sprite)}createCovers(){const e=this.cameras.main.width/3;return Array.from({length:9}).map(((t,s)=>{const a=this.add.rectangle(e*(s%3),e*Math.floor(s/3),e,e,0).setOrigin(0);return this.physics.add.existing(a,!0),a}))}updateCovers(){S.unlockedCellIndexes.forEach(this.removeCover)}getPlayerCellIndex(){const{width:e,height:t}=this.cameras.main;return Math.floor(this.player.sprite.x/(e/3))%3+3*Math.floor(this.player.sprite.y/(t/3))}goToCell(e,t=!0){const s=this.cameras.main.width;S.set("activeZoom",e),S.set("lastNode",""),this.scene.start("CellMap");const a=e%3*66.66,i=66.66*Math.floor(e/3);t&&S.set("lastPlayerPosition",{x:Phaser.Math.Clamp(3*(this.player.sprite.x-a),30,s-30),y:Phaser.Math.Clamp(3*(this.player.sprite.y-i),30,s-30)})}}class Z extends s.Scene{constructor(){super("CellMap"),t(this,"background"),t(this,"player"),t(this,"nodes"),t(this,"isLeaving"),t(this,"enterNearbyNode",(()=>{const e=this.getNearestNode();e&&(this.isLeaving||(this.isLeaving=!0,S.set("hudText",""),this.sound.play("player-enter",{volume:.5}),this.cameras.main.fadeOut(250,0,0,0,((t,s)=>{if(1===s){const t=e.getData("id");S.set("activeNode",t),S.set("lastNode",t);const s=S.values.unlockedNodes??[],a=Array.from(new Set([...s,t]));S.set("unlockedNodes",a);const i=e.getData("type").includes("fight"),n=i?"Fight":"Shop",r=this.cameras.main.width;i||S.set("lastPlayerPosition",{x:r/2,y:r-40}),this.scene.switch(n)}}))))})),t(this,"getNearestNode",(()=>this.nodes.getChildren().find((e=>{const t=e;return!(Phaser.Math.Distance.BetweenPoints(t,this.player.sprite)>20)&&("fight-boss"!==t.getData("type")||this.getClearedAllCellFightNodes())})))),t(this,"getClearedAllCellFightNodes",(()=>this.getCellFightNodes().every((e=>(S.values.clearedNodes??[]).includes(e.id))))),t(this,"getHasClearedFirstCell",(()=>6!==S.values.activeZoom||w.filter((e=>6===e.cellIndex&&e.type.includes("fight"))).every((e=>(S.values.clearedNodes??[]).includes(e.id))))),t(this,"getCellFightNodes",(()=>w.filter((e=>e.cellIndex===S.values.activeZoom&&"fight"===e.type))))}create(){const e=S.values.activeZoom,t=this.cameras.main.width,s=e%3,a=Math.floor(e/3);this.isLeaving=!1,this.cameras.main.fadeFrom(250,0,0,0),this.background=this.add.sprite(-t*s,-t*a,"map",0).setOrigin(0).setScale(3),this.nodes=this.add.group({defaultKey:"spritesheet"}),this.updateNodes();const i=w.find((e=>e.id===S.values.activeNode||e.id===S.values.lastNode));this.player=new E(this,{x:i?i.x*t:S.values.lastPlayerPosition.x||20,y:i?i.y*t:S.values.lastPlayerPosition.y||t-20}),S.set("health",this.player.stats.healthMax),S.set("activeNode",""),S.set("enemyName",""),S.set("lastGold",0),S.values.showClearedArrow&&(S.set("showClearedArrow",!1),this.showClearedArrow());let n=!0;this.game.events.on("blur",(()=>{n=!1})),this.input.on("pointerdown",((e,t)=>{n?this.scene.isActive("Stats")||e.event instanceof MouseEvent&&0===t.length&&this.enterNearbyNode():n=!0})),this.input.on("pointerup",((e,t)=>{e.event instanceof TouchEvent&&0===t.length&&this.time.now-e.downTime<300&&this.enterNearbyNode()}))}update(){var e;if(this.player.update(),this.isLeaving)return;this.player.isNearEdge()&&this.getHasClearedFirstCell()&&this.unzoom();const t=(null==(e=this.getNearestNode())?void 0:e.getData("name"))??"";t!==S.values.hudText&&(t&&this.sound.play("menu-select",{volume:2}),S.set("hudText",t))}updateNodes(){const{width:e,height:t}=this.cameras.main,s=S.values.activeZoom;w.filter((e=>e.cellIndex===s)).forEach((s=>{var a;const i=this.nodes.get(s.x*e,s.y*t);let n=C[s.type];s.type.includes("fight")&&S.values.clearedNodes.includes(s.id)&&(n=59);let r="shop"===s.type||(null==(a=S.values.unlockedNodes)?void 0:a.includes(s.id));"fight-boss"===s.type&&(r=this.getClearedAllCellFightNodes()),i.setFrame(n).setData("name",s.name).setData("type",s.type).setData("id",s.id).setVisible(r)}))}unzoom(){this.isLeaving||(this.sound.play("player-exit",{volume:.6}),this.isLeaving=!0,this.cameras.main.fadeOut(250,0,0,0,((e,t)=>{1===t&&(S.set("lastZoom",S.values.activeZoom),S.set("activeZoom",-1),S.set("lastPlayerPosition",{x:this.player.sprite.x,y:this.player.sprite.y}),this.scene.start("WorldMap"))})))}showClearedArrow(){const e=this.cameras.main.width,t=$[S.values.activeZoom];let s=270,a=10,i=e/2;0===t?(a=e/2,i=20,s=0):1===t?(a=e-10,i=e/2,s=90):2===t&&(s=180,a=e/2,i=e-20);const n=this.add.sprite(a,i,"spritesheet",55).setAngle(s).setOrigin(.5,.5).setDepth(20);this.time.addEvent({callback:()=>n.setAlpha(.4===n.alpha?1:.4),delay:400,repeat:-1})}}const $={0:1,1:1,2:0,3:0,4:3,5:3,6:1,7:1,8:0};class K extends s.Scene{constructor(){super("Menu"),t(this,"title"),t(this,"sword"),t(this,"text"),t(this,"background"),t(this,"music"),t(this,"startGame",(()=>{this.tweens.add({targets:this.music,volume:0,duration:1e3,onComplete:()=>{var e;null==(e=this.music)||e.stop()}}),this.cameras.main.fadeOut(1e3,0,0,0,((e,t)=>{1===t&&(this.scene.launch("Hud"),this.scene.start("WorldMap"))}))})),t(this,"swordFall",(()=>{const{height:e}=this.cameras.main;this.sound.play("sword-fall"),this.tweens.add({targets:this.sword,y:e/2-6,duration:1500}),this.time.delayedCall(1500,(()=>{this.tweens.add({targets:this.sword,repeat:-1,y:{from:e/2-6,to:e/2-3},yoyo:!0,ease:"Phaser.Math.Easing.Sine.InOut",duration:2e3,onUpdate:()=>{this.sword.y=Math.round(this.sword.y)}}),this.time.delayedCall(500,(()=>{let e=1===S.values.muted?0:.5;S.values.hasWon?this.music=this.sound.add("music-win",{loop:!0,volume:e}):this.music=this.sound.add("music-menu",{loop:!0,volume:e}),this.music.play(),this.input.once("pointerdown",this.startGame)})),this.sound.play("sword-land"),this.tweens.add({targets:this.title,alpha:1,ease:"Phaser.Math.Easing.Sine.InOut",duration:2500}),this.tweens.add({targets:this.text,alpha:1,duration:2500})}))}))}create(){const{width:e,height:t}=this.cameras.main,s=S.values.hasWon;this.cameras.main.fadeFrom(1e3,0,0,0),this.background=this.add.sprite(e/2,t/2,"map",3),this.title=this.add.image(e/2,t/2-65,"title").setOrigin(.5).setAlpha(0),this.sword=this.add.image(e/2-1,-100,"sword").setOrigin(.5),this.text=this.add.bitmapText(e/2,t/2+65,"clarity",s?`You won in \n${function(e){const t=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%3600%60);return`${`${t}`.padStart(2,"0")}:${`${s}`.padStart(2,"0")}:${`${a}`.padStart(2,"0")}`}(S.values.timePlayed)}\nwith ${S.values.deathCount} deaths`:"Click to start",8).setCenterAlign().setOrigin(.5).setAlpha(0),s?this.swordFall():this.input.once("pointerdown",this.swordFall)}}class j{constructor(e,s,a){t(this,"scene"),t(this,"rect"),t(this,"text"),this.scene=e,this.rect=this.scene.add.rectangle(s-1,a-1,38,10,2236962).setOrigin(1,1),this.text=this.scene.add.bitmapText(s-1,a-1,"clarity","Stats",8).setOrigin(1,1)}hide(){this.rect.setVisible(!1),this.text.setVisible(!1)}show(){this.rect.setVisible(!0),this.text.setVisible(!0)}}class W{constructor(e,s,a,i,n,r){t(this,"scene"),t(this,"rect0"),t(this,"rect"),t(this,"rect2"),t(this,"setScale",(e=>{this.rect2.setScale(Phaser.Math.Clamp(e,0,1),1)})),t(this,"show",(()=>{this.rect0.setVisible(!0),this.rect.setVisible(!0),this.rect2.setVisible(!0)})),t(this,"hide",(()=>{this.rect0.setVisible(!1),this.rect.setVisible(!1),this.rect2.setVisible(!1)})),this.scene=e,this.rect0=this.scene.add.rectangle(s,a,i,n,16777215).setDepth(9).setOrigin(0,0),this.rect=this.scene.add.rectangle(s+1,a+1,i-2,n-2,0).setOrigin(0,0).setDepth(10),this.rect2=this.scene.add.rectangle(s+1,a+1,i-2,n-2,r).setOrigin(0,0).setDepth(11).setScale(1,1)}}class q extends s.Scene{constructor(){super("Hud"),t(this,"topText"),t(this,"bottomText"),t(this,"bottomBar"),t(this,"topBar"),t(this,"statsButton"),t(this,"playerHealthBar"),t(this,"enemyNameText"),t(this,"enemyHealthBar"),t(this,"music"),t(this,"updateText",(()=>{var e;const t=`Gold: ${Math.floor(S.values.gold)??0}${S.values.lastGold?` +${S.values.lastGold}`:""}`;S.values.pauseMusic&&!this.music.isPaused&&this.tweens.add({targets:this.music,volume:0,duration:500,onComplete:()=>this.music.pause()}),!S.values.pauseMusic&&this.music.isPaused&&this.music.play({volume:1===S.values.muted?0:.5});let s=this.game.scene.getScene("CellMap"),a=this.game.scene.getScene("Fight"),i=this.scene.isActive("CellScene")?s:a;i.player&&this.playerHealthBar.setScale(S.values.health/(null==(e=i.player)?void 0:e.stats.healthMax)),S.values.enemyName?(this.enemyNameText.setText(`- ${S.values.enemyName}`),this.enemyHealthBar.show(),this.enemyHealthBar.setScale(S.values.enemyHealth/S.values.enemyMaxHealth)):(this.enemyNameText.setText(""),this.enemyHealthBar.hide());const n=w.find((e=>e.id===S.values.activeNode));(null==n?void 0:n.type.includes("fight"))||-1===S.values.activeZoom?this.statsButton.hide():this.statsButton.show(),-1===S.values.activeZoom?this.playerHealthBar.hide():this.playerHealthBar.show(),this.topText.setText(S.values.hudText),this.topBar.setDisplaySize(this.cameras.main.width,Math.max(12,this.topText.height)),this.bottomText.setText(t),this.bottomText.setVisible(-1!==S.values.activeZoom),this.bottomBar.setVisible(-1!==S.values.activeZoom),this.topText.setVisible(-1!==S.values.activeZoom),this.topBar.setVisible(-1!==S.values.activeZoom)}))}create(){const{width:e,height:t}=this.cameras.main;S.set("pauseMusic",!1),this.music=this.sound.add("music-game",{loop:!0,volume:1===S.values.muted?0:.5}),this.music.play(),this.topBar=this.add.rectangle(0,0,e,12,0).setOrigin(0,0),this.bottomBar=this.add.rectangle(0,t-12,e,12,0).setOrigin(0,0).setInteractive().on("pointerdown",(()=>{const e=w.find((e=>e.id===S.values.activeNode));(null==e?void 0:e.type.includes("fight"))||this.scene.launch("Stats")})),this.topText=this.add.bitmapText(e/2,0,"clarity","",8,.5).setOrigin(.5,0).setCenterAlign(),this.bottomText=this.add.bitmapText(85,t-12,"clarity","",8),this.statsButton=new j(this,e,e),this.enemyNameText=this.add.bitmapText(85,0,"clarity"," - Snake",8),this.playerHealthBar=new W(this,1,e-10,75,8,15476543),this.enemyHealthBar=new W(this,1,2,75,8,5944658),this.updateText(),this.registry.events.on("changedata",this.updateText),this.time.addEvent({delay:1e3,callback:()=>{S.set("timePlayed",S.values.timePlayed+1)},repeat:-1})}shutdown(){this.tweens.add({targets:this.music,volume:0,duration:500,onComplete:()=>this.music.pause()}),this.registry.events.off("changedata",this.updateText)}}class X extends s.Scene{constructor(){super("Stats"),t(this,"topBar"),t(this,"updateText",(()=>{}))}create(){const{width:e}=this.cameras.main;this.topBar=this.add.rectangle(0,0,e,e,0).setOrigin(0,0).setAlpha(.9);let t="",s=this.game.scene.getScene("CellMap"),a=this.game.scene.getScene("WorldMap"),i=this.scene.isActive("CellScene")?s:a;_.map((({key:e,label:t})=>({key:e,label:t,value:i.player.stats[e]}))).filter((e=>e.value!==A[e.key])).forEach((({label:e,value:s,key:a})=>{const i=k.find((e=>e.key===a));t+=e,t+=" - ",t+=(null==i?void 0:i.percent)?`${Math.round(100*s)}%`:s,t+="\n"})),this.add.bitmapText(0,0,"clarity",t,8),this.updateText(),this.input.on("pointerdown",(()=>{this.scene.stop("Stats")}))}}const _=[{key:"damageMulti",label:"hero damage multiplier"},{key:"speedMeleeMulti",label:"hero attack speed"},{key:"healthMax",label:"hero max health"},{key:"defenseMelee",label:"hero melee defense"},{key:"defenseRanged",label:"hero ranged defense"},{key:"speedMoveMulti",label:"hero move speed"},{key:"earnRateMulti",label:"sword gold multiplier"},{key:"rangeCount",label:"sword ranged bullet count"},{key:"damageMeleeBase",label:"sword base damage"},{key:"damageMeleeFreq",label:"sword hits per attack"},{key:"damageRangeBase",label:"sword ranged base damage"},{key:"sizeBase",label:"sword size"}],U={type:Phaser.AUTO,width:200,height:200,scale:{zoom:2*window.devicePixelRatio},parent:"game-container",backgroundColor:"#000000",physics:{default:"arcade"},pixelArt:!0,scene:[B,K,z,V,G,Z,q,X]};new s.Game(U);
